function Alignment(t){this.item=t,this.bitmap=t.bitmap,this.allAlignments=new Array(this.topLeft,this.topRight,this.middleCenter,this.bottomLeft,this.bottomRight),this.horizontalAlignmentPoints=new Array(AlignmentPoint.Top,AlignmentPoint.Middle,AlignmentPoint.Bottom),this.verticalAlignmentPoints=new Array(AlignmentPoint.Left,AlignmentPoint.Center,AlignmentPoint.Right),this.getValueFromAlignmentPoint=function(t){var e
switch(t){case AlignmentPoint.Left:e=this.left
break
case AlignmentPoint.Center:e=this.center
break
case AlignmentPoint.Right:e=this.right
break
case AlignmentPoint.Top:e=this.top
break
case AlignmentPoint.Middle:e=this.middle
break
case AlignmentPoint.Bottom:e=this.bottom}return e},this.getClosestIndexByRotation=function(t,e){var n=new Array(0,1,2,3,4,5,6,7,8)
switch(e){case 90:n=new Array(6,3,0,7,4,1,8,5,2)
break
case 180:n=new Array(8,7,6,5,4,3,2,1,0)
break
case 270:n=new Array(2,5,8,1,4,7,0,3,6)}return n[t]}}function AlignmentDrawer(t){this.item=t,this.snapThreshold=5,this.shouldShowLongest=!1,this.alignLines=[],this.clearAlignmentLines=function(){for(var t=this.alignLines.length-1;t>=0;t--)this.alignLines[t].graphics.clear(),this.item.removeChild(this.alignLines[t])
this.alignLines=[]},this.drawAlignmentLines=function(t){for(var e="#5298EB",n=new Vector(0,0),i=Object.keys(t),o=0;o<i.length;o++)for(var r=t[i[o]],a=0;a<r.length;a++){var n,s=r[a],h=s.dot.dot,l=new createjs.Shape,g=s.endItem.localToLocal(0,0,this.item)
s.direction==AlignmentDirection.Left||s.direction==AlignmentDirection.Right?this.item.alignment.isHorizontal?(n.x=h.x,n.y=g.y):(n.x=g.x,n.y=h.y):this.item.alignment.isHorizontal?(n.x=g.x,n.y=h.y):(n.x=h.x,n.y=g.y),l.graphics.setStrokeStyle(1).beginStroke(e).moveTo(h.x,h.y).lineTo(n.x,n.y).endStroke(),l.graphics.setStrokeStyle(1).setStrokeDash(0).beginStroke("white").beginFill(e).drawCircle(n.x,n.y,4).endStroke().endFill().beginStroke("white").beginFill(e).drawCircle(h.x,h.y,4).endStroke().endFill(),this.alignLines.push(l),this.item.addChild(l)}},this.getAllAlignmentArrays=function(t){for(var e={},n=0;n<t.length;n++){var i=t[n]
null==e[i.colinearAssignmentKey]&&(e[i.colinearAssignmentKey]=[]),e[i.colinearAssignmentKey].push(i)}return e},this.getAllAlignmentLines=function(){for(var t=this.item.guideDrawer.dots,e=[],n=0;n<t.length;n++){var i=this.getAlignmentLinesForDot(t[n])
e.push.apply(e,i)}return e},this.getAlignmentLinesForDot=function(t){for(var e,n=[],i=t.dot.localToGlobal(0,0),o=0;o<items.length;o++){var r=items[o]
if(r!=this.item&&(null==r.alignment&&console.log("Why is this item's alignment undefined?"),null!=r.alignment&&r.alignment.isAtRightAngle)){for(var a=r.alignment.horizontalAlignmentValues,s=r.alignment.verticalAlignmentValues,h=0;h<a.length;h++){var l=r.localToGlobal(0,a[h]),g=l.y-i.y,c=Math.abs(g)
c<this.snapThreshold&&(e=new AlignmentLine(t,r,i,l),n.push(e))}for(var u=0;u<s.length;u++){var l=r.localToGlobal(s[u],0),g=l.x-i.x,c=Math.abs(g)
c<this.snapThreshold&&(e=new AlignmentLine(t,r,i,l),n.push(e))}}}return n},this.handleAlignmentLines=function(){this.clearAlignmentLines()
var t=this.getAllAlignmentLines(),e=this.getAllAlignmentArrays(t)
this.shouldShowLongest&&(e=this.selectLongestAlignmentLines(e)),this.drawAlignmentLines(e)},this.selectLongestAlignmentLines=function(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++){for(var o=t[e[i]],r=[],a=o[0],s=o[0].length,h=1;h<o.length;h++)o[h].length>s&&(a=o[h],s=o[h].length)
r.push(a),n[e[i]]=r}return n}}function AlignmentLine(t,e,n,i){this.dot=t,this.endItem=e,this.startPoint=n,this.endPoint=new Vector(i.x,i.y),this.setup=function(){this.direction=this.getDirection(n,i),this.plane=this.getPlane(this.dot,this.direction),this.colinearAssignment=new ColinearAssignment(this.direction,this.plane),this.colinearAssignmentKey=this.colinearAssignment.direction+","+this.colinearAssignment.plane,this.length=Vector.distance(this.endPoint,this.startPoint)},this.getDirection=function(t,e){var n,i=new Vector(t.x,t.y),o=new Vector(e.x,e.y),r=o.subtract(i).unitRounded()
return 1==r.x?n=AlignmentDirection.Right:-1==r.x?n=AlignmentDirection.Left:1==r.y?n=AlignmentDirection.Up:-1==r.y&&(n=AlignmentDirection.Down),n},this.getPlane=function(t,e){var n=e==AlignmentDirection.Right||e==AlignmentDirection.Left
return n?t.verticalAlignmentPoint:t.horizontalAlignmentPoint},this.setup()}function ColinearAssignment(t,e){this.direction=t,this.plane=e}function toggleAudio(){var t=readCookie("audio")
"on"==t?(eraseCookie("audio"),createCookie("audio","off",365)):(eraseCookie("audio"),createCookie("audio","on",365)),updateAudio()}function updateAudio(){var t=document.getElementById("bgm"),e=readCookie("audio")
"on"==e?(t.pause(),document.getElementById("audio_off").setAttribute("style","display: inline-block"),document.getElementById("audio_on").setAttribute("style","display: none")):(t.play(),document.getElementById("audio_off").setAttribute("style","display: none"),document.getElementById("audio_on").setAttribute("style","display: inline-block"))}function createCookie(t,e,n){if(n){var i=new Date
i.setTime(i.getTime()+24*n*60*60*1e3)
var o="; expires="+i.toGMTString()}else var o=""
document.cookie=t+"="+e+o+"; path=/"}function readCookie(t){console.log(document.cookie)
for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1,o.length)
if(0==o.indexOf(e))return o.substring(e.length,o.length)}return null}function eraseCookie(t){createCookie(t,"",-1)}function GuideDrawer(t){this.item=t,this.setup=function(){this.drawDots(),this.drawGuides(),this.line=new createjs.Shape,this.item.addChild(this.line),this.dashOffset=0,this.offsetAdvanceSpeed=.5,this.offsetLimit=1e5},this.drawDots=function(){.5*this.item.dotDiameter
this.dots=new Array
for(var t=this.item.alignment.horizontalAlignmentPoints,e=this.item.alignment.verticalAlignmentPoints,n=0;n<t.length;n++)for(var i=0;i<e.length;i++){var o=t[n],r=e[i],a=new GuideDot(this.item,o,r)
this.dots.push(a)}},this.drawGuides=function(){this.guides=new Array
for(var t=this.item.alignment,e=t.bottomLeft,n=t.topRight,i=new Array(new Vector(e.x,e.y),new Vector(e.x,n.y),new Vector(e.x,e.y),new Vector(n.x,e.y)),o=new Array(new Vector(n.x,e.y),new Vector(n.x,n.y),new Vector(e.x,n.y),new Vector(n.x,n.y)),r=new Array(6,7,8,3,4,5,0,1,2,6,3,0,7,4,1,8,5,2),a=0,s=0;s<i.length;s++){var h=new GuideLine(this.item,i[s],o[s])
this.guides.push(h)
for(var l=0;3>l;l++)h.addGuideDot(this.dots[r[a]]),a++}},this.hideActiveGuidesByDot=function(t){null!=t&&t.show(this.item.dotColor),this.hideGuides()},this.hideGuides=function(){this.line.graphics.clear()
for(var t=0;t<this.guides.length;t++)this.guides[t].hide()},this.showActiveGuidesByDot=function(t){null!=t&&t.show("red"),this.showSelection(t)},this.showSelection=function(t){var e=this.item.alignment
this.line.graphics.clear(),this.dashOffset+=this.offsetAdvanceSpeed,this.dashOffset>this.offsetLimit&&(this.dashOffset=0)
var n=this.dashOffset
this.line.graphics.setStrokeStyle(5,"square").setStrokeDash([10,10],n).beginStroke(this.item.dotColor).rect(-e.width/2-itemHitboxPadding,-e.height/2-itemHitboxPadding,e.width+2*itemHitboxPadding,e.height+2*itemHitboxPadding)},this.showSelectionActive=function(){this.item.alignment
this.line.graphics.clear()},this.setup()}function GuideDot(t,e,n){this.item=t,this.horizontalAlignmentPoint=e,this.verticalAlignmentPoint=n,this.setup=function(){this.dot=new createjs.Shape
var t=this.item.alignment.getValueFromAlignmentPoint(n),i=this.item.alignment.getValueFromAlignmentPoint(e)
this.dot.x=t,this.dot.y=i,this.show(),this.item.addChild(this.dot)},this.hide=function(){},this.show=function(t){this.hide(),null==t&&(t=this.item.dotColor)},this.setup()}function GuideLine(t,e,n){this.item=t,this.startVector=e,this.endVector=n,this.guideDots=new Array,this.setup=function(){this.line=new createjs.Shape,this.show(),this.item.addChild(this.line)},this.addGuideDot=function(t){this.guideDots.push(t)},this.containsDot=function(t){for(var e=0;e<this.guideDots.length;e++)if(this.guideDots[e]===t)return!0
return!1},this.hide=function(){this.line.graphics.clear()},this.show=function(t){null==t&&(t=this.item.dotColor),this.line.graphics.setStrokeStyle(5,"square").beginStroke(t).moveTo(e.x,e.y).lineTo(n.x,n.y).endStroke()},this.setup()}function GET(t){var e=window.location.search,n=e.search(t),i=t.length,o=i+n+1,r=e.substring(0,o)
return e=e.replace(r,""),n=e.search("&"),n>=0?e.substr(0,n):0>n?e:void 0}function loadFromURL(){var t=window.location.search
if(t=t.substring(1,t.length),""==t)return!1
var e=Parse.Object.extend("Knoll"),n=new Parse.Query(e)
return n.get(t,{success:function(t){var e=t.get("data")
removeItems()
var n=document.getElementById(element_id.intro_cancel)
n.setAttribute("style","display: inline-block"),create(JSON.parse(e))},error:function(t,e){console.log(e),create(itemData)}}),!0}function load(){removeItems(),create(itemData)}function save(t){itemData=new Array
for(var e=0;e<itemContainer.children.length;e++){var n=itemContainer.children[e],i={img:n.name,x:n.x,y:n.y,rotation:n.rotation}
itemData[e]=i}var i=JSON.stringify(itemData),o=Parse.Object.extend("Knoll"),r=new o
r.set("data",i),r.save(null,{success:function(e){t(e.id)},error:function(t,e){console.log("Failed to create new object, with error code: "+e.message)}}),debug&&console.log(i)}function exportCanvas(){var t=document.getElementById(element_id.canvas),e=new createjs.Bitmap(t)
e.cache(0,0,t.width,t.height,1)
var n=e.getCacheDataURL()
return n}function share(){var t=document.getElementById("share_button")
t.setAttribute("disabled","disabled"),centerKnoll(function(){knollChanged||null==last_id?save(showShare):showShare(last_id)}),ga("send",{hitType:"event",eventCategory:"action",eventAction:"done"})}function showShare(t){last_id=t,knollChanged=!1,hide(element_id.header),show(element_id.share)
var e=document.getElementById(element_id.share)
input=e.getElementsByTagName("INPUT")[0],input.value="http://stupiddesk.com/?"+t,input.select()
var n=document.getElementById(element_id.share_img)
n.setAttribute("style","background-image: url('"+exportCanvas()+"')")}function tweet(){var t=document.getElementById(element_id.share)
input=t.getElementsByTagName("INPUT")[0]
var e="My%20%23StupidDesk%20brings%20all%20the%20boys%20to%20the%20yard%0AAnd%20they%27re%20like%2C%20it%27s%20better%20than%20yours%2E%0A"
return window.open("https://twitter.com/intent/tweet?hashtags=deepdarkhole&ref_src=twsrc%5Etfw&text="+e+"&tw_p=tweetbutton&url="+escape(input.value),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600"),!1}function facebook(){var t=document.getElementById(element_id.share)
return input=t.getElementsByTagName("INPUT")[0],ga("send",{hitType:"social",socialNetwork:"facebook",socialAction:"share",socialTarget:"http://stupiddesk.com"}),window.open("https://www.facebook.com/sharer/sharer.php?u="+escape(input.value),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600"),!1}function initStage(){stage=new createjs.Stage(element_id.canvas),stage.enableMouseOver(),stage.mouseMoveOutside=!0,stage.update()}function create(t){if(itemContainer=new createjs.Container,itemContainer.x=itemContainer.y=0,items=new Array,null==t){for(var e=0;e<defaultImages.length;e++){var n=new Item(defaultImages[e],null)
items.push(n),itemContainer.addChild(n)}for(var i=images.slice(),o=Math.floor(Math.random()*(randomMax-randomMin)+randomMin),e=0;o>e;e++){var r=Math.floor(Math.random()*i.length),n=new Item(i[r],null)
items.push(n),itemContainer.addChild(n),i.splice(r,1)}}else for(var e=0;e<t.length;e++){var n=new Item(t[e].img,t[e])
items.push(n),itemContainer.addChild(n)}stage.addChild(itemContainer),center(),stage.update(),knollChanged=!1}function centerKnoll(t){var e=itemContainer.getBounds()
cX=e.x+e.width/2,cY=e.y+e.height/2,tX=0,tY=0
for(var n=items.length,i=0;i<items.length;i++){var o=items[i]
o.offsetBy(tX-cX,tY-cY,function(){n--,0==n&&t()})}}function stupid(){cancel(),removeItems(),create(null),last_id=null,ga("send",{hitType:"event",eventCategory:"action",eventAction:"stupid"})}function center(){itemContainer&&(itemContainer.x=.5*window.innerWidth,itemContainer.y=.5*window.innerHeight)}function resize(){stage.clear(),stage.canvas.width=window.innerWidth,stage.canvas.height=window.innerHeight
var t=30,e=stage.canvas.height/t,n=stage.canvas.width/t
gridSize=n>e?e:n}function removeItems(){itemContainer&&(items=new Array,stage.removeChild(itemContainer))}function enableDelete(){document.onkeydown=keyPressed}function keyPressed(t){if(8==t.keyCode){for(var e=0;e<items.length;e++)if(items[e].hovering){deleteItem(items[e])
break}knollChanged=!0}}function deleteItem(t){if(itemContainer){itemContainer.removeChild(t)
for(var e=0;e<items.length;e++)if(items[e]==t){items.splice(e,1)
break}}}function Vector(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function init(){allowDelete&&enableDelete(),null==stage&&initStage(),resize(),window.addEventListener("resize",resize,!1),createjs.Touch.enable(stage),center(),createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.addEventListener("tick",tick),createjs.Ticker.setFPS(30),Parse.initialize("AeLWidTlB5fwyEf5BxDN90MMmSGIF9RpI3WDc8SI","7IVEuZFFlpO2U6f5p8UF0q8doUX5w1DDS8adOvgQ"),debug?start():0==loadFromURL()&&create(itemData)}function enableStart(){for(var t=document.getElementById(element_id.intro),e=t.getElementsByTagName("BUTTON"),n=0;n<e.length;n++){var i=e[n],o=i.getAttributeNode("disabled")
o&&i.removeAttributeNode(o)}}function start(){hide(element_id.intro),show(element_id.header),stupid(),updateAudio()}function view(){updateAudio(),cancel()}function hide(t){var e=document.getElementById(t)
e.style.visibility="hidden"}function show(t){var e=document.getElementById(t)
e.style.visibility="visible"}function cancel(){hide(element_id.confirm),hide(element_id.share),hide(element_id.intro),hide(element_id.about),show(element_id.header)
var t=document.getElementById("share_button")
attr=t.getAttributeNode("disabled"),attr&&t.removeAttributeNode(attr)}function confirm(){return knollChanged?(show(element_id.confirm),void hide(element_id.header)):void stupid()}function about(){show(element_id.about),hide(element_id.header),ga("send",{hitType:"event",eventCategory:"action",eventAction:"about"})}function tick(t){center(),updateAnimation(),stage.update()}function updateAnimation(){if(null!=items)for(var t=0;t<items.length;t++)items[t].animateGuides()}var debug=!1,allowDelete=!0,stage,itemContainer,items,itemData=[{img:"old camera.png",x:-307.82349038124084,y:-283.8936929570045,rotation:360},{img:"greetings philly.png",x:-555.8659694194794,y:-371.6918951349798,rotation:360},{img:"greetings jamestown.png",x:-557.4352353811264,y:-198.2360661386046,rotation:360},{img:"pen-2.png",x:-408.5555098056793,y:20.407348440261615,rotation:360},{img:"brush-4.png",x:-470.11325562000275,y:34.704021123005134,rotation:540},{img:"pen-1.png",x:-537.0677423477173,y:29.318985465681237,rotation:360},{img:"coffee cup.png",x:-290.19663512706757,y:-26.333848353708106,rotation:630},{img:"scotch.png",x:-307.27445936203003,y:114.67852544668136,rotation:270},{img:"Sharpie .png",x:-574.3898581266403,y:10.011144374264461,rotation:180},{img:"pen-3.png",x:-618.2400069236755,y:14.681676042499078,rotation:540},{img:"card front.png",x:-107.03667438030243,y:453.6380500190426,rotation:360},{img:"Kurecolor.png",x:-549.68152821064,y:225.53721906966535,rotation:270},{img:"sharpener.png",x:-605.2222641706467,y:160.24782524653716,rotation:180},{img:"weve travled so far.png",x:-307.2638508081436,y:297.389646867523,rotation:360},{img:"brush-3.png",x:790.0296261310577,y:297.3238792826888,rotation:990},{img:"brush-5.png",x:783.1545991897583,y:320.4551221078728,rotation:270},{img:"brush-2.png",x:789.12353515625,y:351.89765748730866,rotation:270},{img:"needle.png",x:-561.0738360881805,y:467.76916158641694,rotation:450},{img:"pen-5.png",x:-499.7154893875122,y:40.82144797756342,rotation:360},{img:"pen.png",x:-439.5964037179947,y:34.998011909658146,rotation:360},{img:"tablet pen.png",x:-660.0056692361832,y:26.503606342943442,rotation:180},{img:"will.png",x:160.93582570552826,y:410.29152604541747,rotation:360},{img:"colours.png",x:839.3380006551743,y:436.35547231952665,rotation:810},{img:"Ruler 3.png",x:605.3904868364334,y:-136.05606101057487,rotation:360},{img:"playing arts 2.png",x:-616.311735868454,y:345.63160378043546,rotation:1080},{img:"glasses 2.png",x:-334.0382717847824,y:474.7211431006436,rotation:90},{img:"playing arts.png",x:-484.052583694458,y:345.88418261264457,rotation:1080},{img:"Grouped Blueprints - Vertical.png",x:-810.8380006551743,y:-31.254791912855524,rotation:90},{img:"Ruler 5.png",x:603.3752324581146,y:-198.86807172955008,rotation:360},{img:"mouse.png",x:534.4224979877472,y:104.90548168332322,rotation:360},{img:"earphones.png",x:768.7042535543442,y:54.08095560292719,rotation:360},{img:"pen cup 3.png",x:771.3598158359528,y:-410.2211431006435,rotation:540},{img:"stupid desk.png",x:681.4977208375931,y:448.9271711262409,rotation:1080},{img:"black notepaper.png",x:78.27281665802002,y:-258.22214496112423,rotation:360},{img:"field notes.png",x:264.26347386837006,y:-224.10311500704842,rotation:360},{img:"color tube box.png",x:492.2217961549759,y:399.03256131918175,rotation:540},{img:"cxutting mat.png",x:642.1214554309845,y:90.97600527084438,rotation:360},{img:"dain.png",x:283.15479815006256,y:407.40816385834484,rotation:360},{img:"cutter.png",x:875.1637153625488,y:-247.58515862864436,rotation:360},{img:"ruler.png",x:592.1710917949677,y:-260.5390818428713,rotation:360},{img:"ruler-1.png",x:532.4357817173004,y:-319.70079834642814,rotation:630},{img:"old ruler.png",x:523.9580495357513,y:-374.59236455173226,rotation:450},{img:"paperclips.png",x:263.0486990213394,y:-403.26122224773275,rotation:450},{img:"Envelope C6 - Vertical.png",x:-108.38415718078613,y:-260.59519315999927,rotation:360},{img:"andrei.png",x:40.695448875427246,y:409.73561857384635,rotation:360},{img:"laptop.png",x:81.53954303264618,y:89.044072726043,rotation:360},{img:"card back.png",x:-106.02602207660675,y:350.6251002156642,rotation:360}],itemQueue,itemScaleFactor=1,itemHitboxPadding=10,gridSize,randomMin=13,randomMax=30,knollChanged=!1,last_id=null,imgPath="./imgs/items/",element_id={intro:"intro",header:"header",canvas:"canvas",content:"content",footer:"footer",loading:"loading","export":"export",confirm:"confirm",share:"share",intro_cancel:"intro_view",about:"about",share_img:"share_img"},defaultImages=["stupid desk.png"],images=["andrei.png","black notepaper.png","box.png","brush box.png","brush-1.png","brush-2.png","brush-3.png","brush-4.png","brush-5.png","brush-6.png","brush.png","business card box.png","card back.png","card front.png","circle pail.png","circle pair.png","clamp-1.png","clamp.png","coffee cup.png","color pen-1.png","color pen.png","color tube box.png","colours.png","compasses.png","cutter.png","cxutting mat.png","dain.png","earphones.png","Envelope C6 - Vertical.png","eraser.png","field notes.png","flash.png","flower.png","glasses 2.png","glasses.png","green bottle.png","green color bottle.png","greetings jamestown.png","greetings philly.png","Grouped Blueprints - Vertical.png","headphones 2.png","keyboard.png","kraft notepaper.png","Kurecolor.png","laptop.png","mouse.png","needle.png","Notebook - Large - 180Â°.png","old book.png","Old Box-1.png","old box-2.png","old box.png","old camera.png","old clamp.png","old clock.png","old ruler.png","old small mirror.png","orange bottle.png","paperclips.png","pen box.png","pen cup 3.png","pen holder.png","pen-1.png","pen-2.png","pen-3.png","pen-4.png","pen-5.png","pen.png","Plant 2 - Cactus - Top.png","playing arts 2.png","playing arts.png","ring.png","Ruler 3.png","Ruler 5.png","ruler-1.png","ruler.png","scotch.png","sharpener.png","Sharpie .png","sketch book.png","small pairs.png","soft pastel.png","tablet pen box.png","tablet pen.png","tablet.png","Tape 2.png","wallet.png","watercolor.png","weve travled so far.png","will.png","wood cubes.png","wood pen.png","yellow bottle .png"],preload=function(){initStage(),cacheWidth(),setLoadingText("&nbsp;"),itemQueue=new createjs.LoadQueue(!1)
for(var t=0;t<images.length;t++)itemQueue.loadFile({id:images[t],src:imgPath+images[t]})
for(var t=0;t<defaultImages.length;t++)itemQueue.loadFile({id:defaultImages[t],src:imgPath+defaultImages[t]})
itemQueue.on("progress",itemLoadProgress,this),itemQueue.on("fileload",itemLoaded,this),itemQueue.on("complete",itemsLoaded,this),init()},itemLoadProgress=function(t){if(!debug){var e=document.getElementById(element_id.loading)
bar=e.getElementsByTagName("SPAN")[0],percent=100*Math.max(t.progress,.1),bar.setAttribute("style","width: "+percent+"%"),1==t.progress?(uncacheWidth(),setLoadingText('<i class="fa fa-magic"></i> Get Stupid'),enableStart()):setLoadingText("&nbsp;")}},itemLoaded=function(t){if(null!=items)for(var e=0;e<items.length;e++)item=items[e],item.img==t.item.id&&item.setupWithAnimation()},itemsLoaded=function(t){},setLoadingText=function(t){var e=document.getElementById(element_id.loading)
text=e.getElementsByTagName("SPAN")[1],text.innerHTML=t},cacheWidth=function(){var t=document.getElementById(element_id.loading),e=window.getComputedStyle(t).getPropertyValue("width")
t.setAttribute("style","width: "+e)},uncacheWidth=function(){var t=document.getElementById(element_id.loading)
t.removeAttribute("style")},AlignmentPoint={Left:0,Center:1,Right:2,Top:3,Middle:4,Bottom:5},AlignmentDirection={Up:0,Right:1,Down:2,Left:3}
Object.freeze(AlignmentPoint),Object.freeze(AlignmentDirection),Object.defineProperties(Alignment.prototype,{x:{get:function(){return this.bitmap.x}},y:{get:function(){return this.bitmap.y}},height:{get:function(){var t=this.bitmap.getBounds()
return t.height*itemScaleFactor}},width:{get:function(){var t=this.bitmap.getBounds()
return t.width*itemScaleFactor}},isAtRightAngle:{get:function(){return this.isHorizontal||this.isVertical}},isHorizontal:{get:function(){return 90==this.trueRotation||270==this.trueRotation}},isVertical:{get:function(){return 0==this.trueRotation||180==this.trueRotation}},trueRotation:{get:function(){return this.item.rotation%360}},absTop:{get:function(){return-(.5*this.height)}},absBottom:{get:function(){return.5*this.height}},absLeft:{get:function(){return-(.5*this.width)}},absRight:{get:function(){return.5*this.width}},top:{get:function(){var t
switch(this.trueRotation){case 0:t=this.absTop
break
case 90:t=this.absLeft
break
case 180:t=this.absBottom
break
case 270:t=this.absRight}return t}},center:{get:function(){return 0}},bottom:{get:function(){var t
switch(this.trueRotation){case 0:t=this.absBottom
break
case 90:t=this.absLeft
break
case 180:t=this.absTop
break
case 270:t=this.absRight}return t}},left:{get:function(){var t
switch(this.trueRotation){case 0:t=this.absLeft
break
case 90:t=this.absTop
break
case 180:t=this.absRight
break
case 270:t=this.absBottom}return t}},middle:{get:function(){return 0}},right:{get:function(){var t
switch(this.trueRotation){case 0:t=this.absRight
break
case 90:t=this.absBottom
break
case 180:t=this.absLeft
break
case 270:t=this.absTop}return t}},topLeft:{get:function(){var t=this.left,e=this.top,n=new Vector(t,e)
return n}},topCenter:{get:function(){var t=this.center,e=this.top,n=new Vector(t,e)
return n}},topRight:{get:function(){var t=this.right,e=this.top,n=new Vector(t,e)
return n}},middleLeft:{get:function(){var t=this.left,e=this.middle,n=new Vector(t,e)
return n}},middleCenter:{get:function(){var t=this.center,e=this.middle,n=new Vector(t,e)
return n}},middleRight:{get:function(){var t=this.right,e=this.middle,n=new Vector(t,e)
return n}},bottomLeft:{get:function(){var t=this.left,e=this.bottom,n=new Vector(t,e)
return n}},bottomCenter:{get:function(){var t=this.center,e=this.bottom,n=new Vector(t,e)
return n}},bottomRight:{get:function(){var t=this.right,e=this.bottom,n=new Vector(t,e)
return n}},horizontalAlignmentValues:{get:function(){return new Array(this.getValueFromAlignmentPoint(this.horizontalAlignmentPoints[0]),this.getValueFromAlignmentPoint(this.horizontalAlignmentPoints[1]),this.getValueFromAlignmentPoint(this.horizontalAlignmentPoints[2]))}},verticalAlignmentValues:{get:function(){return new Array(this.getValueFromAlignmentPoint(this.verticalAlignmentPoints[0]),this.getValueFromAlignmentPoint(this.verticalAlignmentPoints[1]),this.getValueFromAlignmentPoint(this.verticalAlignmentPoints[2]))}}}),function(){function t(t,e){this.Container_constructor(),this.dotColorActive="#000000",this.dotColor="#FFDE00",this.dotDiameter=2,this.img=t,this.position=e,itemQueue.getResult(t)&&this.setupWithAnimation()}var e=createjs.extend(t,createjs.Container)
e.setupWithAnimation=function(){this.setup(this.img,this.position),this.alpha=0,createjs.Tween.get(this).to({alpha:1},1e3)},e.setup=function(t,e){var n=new createjs.Bitmap(itemQueue.getResult(t)),i=n.getBounds(),o=new createjs.Shape,r=o.graphics
if(n.scaleX*=itemScaleFactor,n.scaleY*=itemScaleFactor,i){n.x=.5*-i.width*itemScaleFactor,n.y=.5*-i.height*itemScaleFactor
var a=.5*itemHitboxPadding
r.beginFill("rgba(0,0,0,0.2)").drawRect(n.x-a,n.y-a,i.width*itemScaleFactor+itemHitboxPadding,i.height*itemScaleFactor+itemHitboxPadding).endFill()}var s=5
if(n.shadow=new createjs.Shadow("rgba(0,0,0,0.2)",2,2,s),n.scaleX=n.scaleY=itemScaleFactor,this.on("mousedown",this.handlePressDown),this.on("pressmove",this.handlePressMove),this.on("pressup",this.handlePressUp),this.on("rollover",this.handleRollOver),this.on("rollout",this.handleRollOut),this.name=t,this.tickEnabled=!1,this.cursor="pointer",this.offset=10*Math.random(),this.count=0,this.pressing=!1,this.wasMoved=!1,this.quickRotated=!1,this.bitmap=n,this.addChild(n),debug){this.hitArea=o
var h=new createjs.Text(this.name,"20px Arial","#FFFFFFF")
h.x=h.getBounds().width*-.5,h.y=.5*i.height,h.textBaseline="alphabetic",this.addChild(h)}else this.hitArea=o
if(null==e){var l=stage.canvas.width,g=stage.canvas.height
this.x=l*Math.random()-.5*l,this.y=g*Math.random()-.5*g,this.setAlignment(),this.rotation=this.currentRotation=360*Math.random()}else this.x=e.x,this.y=e.y,this.setAlignment(),this.rotation=this.currentRotation=e.rotation
this.alignmentDrawer=new AlignmentDrawer(this)},e.offsetBy=function(t,e,n){var i=this.x+t,o=this.y+e
createjs.Tween.get(this).to({x:i,y:o},200).call(n)},e.getNextRotationValue=function(t){var e=4
if(t%(360/e)==0)return t+360/e
for(var n=0;e>n;n++){var i=360/e*(n+1)
if(!(t>=i))return i}},e.getRoundedNumber=function(t){return Math.round(t/gridSize)*gridSize},e.handlePressDown=function(t){this.cursor="move",this.currentRotation%90!=0&&(this.currentRotation=this.getNextRotationValue(this.currentRotation),createjs.Tween.get(this).to({rotation:this.currentRotation},200,createjs.Ease.backOut),this.quickRotated=!0,knollChanged=!0)},e.handlePressMove=function(t){if(this.pressing)this.wasMoved=!0
else{this.offsetX=t.stageX-itemContainer.x-this.x,this.offsetY=t.stageY-itemContainer.y-this.y,this.wasMoved=!1
new Vector(t.stageX-itemContainer.x,t.stageY-itemContainer.y)
this.guideDrawer.showActiveGuidesByDot(this.closestAlignmentDot)}this.alignmentDrawer.handleAlignmentLines(),this.x=t.stageX-itemContainer.x-this.offsetX,this.y=t.stageY-itemContainer.y-this.offsetY,this.pressing=!0,this.hovering=!1,this.guideDrawer.showSelectionActive(),knollChanged=!0},e.handlePressUp=function(t){this.wasMoved||this.quickRotated||(this.currentRotation=this.getNextRotationValue(this.currentRotation),createjs.Tween.get(this).to({rotation:this.currentRotation},200,createjs.Ease.backOut),knollChanged=!0),this.pressing=!1,this.wasMoved=!1,this.cursor="pointer",this.alignmentDrawer.clearAlignmentLines()
var e=this.globalToLocal(stage.mouseX,stage.mouseY)
this.hitTest(e.x,e.y)?(this.hovering=!0,this.guideDrawer.showSelection()):this.hovering=!1,this.quickRotated=!1},e.handleRollOver=function(t){1!=this.pressing&&(this.hovering=!0,this.guideDrawer.showSelection(),this.parent.setChildIndex(this,this.parent.numChildren-1))},e.handleRollOut=function(t){this.hovering=!1,this.guideDrawer.hideGuides()},e.setAlignment=function(){this.alignment=new Alignment(this),this.guideDrawer=new GuideDrawer(this),this.guideDrawer.hideGuides()},e.animateGuides=function(){this.hovering&&this.guideDrawer.showSelection()},window.Item=createjs.promote(t,"Container")}(),Object.defineProperties(GuideDot.prototype,{isCardinalDot:{get:function(){return this.item.alignmentbitmap.x}}}),function(t,e){if("function"==typeof define&&define.amd)define([],e)
else if("object"==typeof exports){var n=e()
"object"==typeof module&&module&&module.exports&&(exports=module.exports=n),exports.randomColor=n}else t.randomColor=e()}(this,function(){function t(t){var e=r(t.hue),n=h(e)
return 0>n&&(n=360+n),n}function e(t,e){if("random"===e.luminosity)return h([0,100])
if("monochrome"===e.hue)return 0
var n=a(t),i=n[0],o=n[1]
switch(e.luminosity){case"bright":i=55
break
case"dark":i=o-10
break
case"light":o=55}return h([i,o])}function n(t,e,n){var i=o(t,e),r=100
switch(n.luminosity){case"dark":r=i+20
break
case"light":i=(r+i)/2
break
case"random":i=0,r=100}return h([i,r])}function i(t,e){switch(e.format){case"hsvArray":return t
case"hslArray":return d(t)
case"hsl":var n=d(t)
return"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)"
case"hsla":var i=d(t)
return"hsla("+i[0]+", "+i[1]+"%, "+i[2]+"%, "+Math.random()+")"
case"rgbArray":return u(t)
case"rgb":var o=u(t)
return"rgb("+o.join(", ")+")"
case"rgba":var r=u(t)
return"rgba("+r.join(", ")+", "+Math.random()+")"
default:return l(t)}}function o(t,e){for(var n=s(t).lowerBounds,i=0;i<n.length-1;i++){var o=n[i][0],r=n[i][1],a=n[i+1][0],h=n[i+1][1]
if(e>=o&&a>=e){var l=(h-r)/(a-o),g=r-l*o
return l*e+g}}return 0}function r(t){if("number"==typeof parseInt(t)){var e=parseInt(t)
if(360>e&&e>0)return[e,e]}if("string"==typeof t&&p[t]){var n=p[t]
if(n.hueRange)return n.hueRange}return[0,360]}function a(t){return s(t).saturationRange}function s(t){t>=334&&360>=t&&(t-=360)
for(var e in p){var n=p[e]
if(n.hueRange&&t>=n.hueRange[0]&&t<=n.hueRange[1])return p[e]}return"Color not found"}function h(t){if(null===m)return Math.floor(t[0]+Math.random()*(t[1]+1-t[0]))
var e=t[1]||1,n=t[0]||0
m=(9301*m+49297)%233280
var i=m/233280
return Math.floor(n+i*(e-n))}function l(t){function e(t){var e=t.toString(16)
return 1==e.length?"0"+e:e}var n=u(t),i="#"+e(n[0])+e(n[1])+e(n[2])
return i}function g(t,e,n){var i=n[0][0],o=n[n.length-1][0],r=n[n.length-1][1],a=n[0][1]
p[t]={hueRange:e,lowerBounds:n,saturationRange:[i,o],brightnessRange:[r,a]}}function c(){g("monochrome",null,[[0,0],[100,0]]),g("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),g("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),g("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),g("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),g("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),g("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),g("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function u(t){var e=t[0]
0===e&&(e=1),360===e&&(e=359),e/=360
var n=t[1]/100,i=t[2]/100,o=Math.floor(6*e),r=6*e-o,a=i*(1-n),s=i*(1-r*n),h=i*(1-(1-r)*n),l=256,g=256,c=256
switch(o){case 0:l=i,g=h,c=a
break
case 1:l=s,g=i,c=a
break
case 2:l=a,g=i,c=h
break
case 3:l=a,g=s,c=i
break
case 4:l=h,g=a,c=i
break
case 5:l=i,g=a,c=s}var u=[Math.floor(255*l),Math.floor(255*g),Math.floor(255*c)]
return u}function d(t){var e=t[0],n=t[1]/100,i=t[2]/100,o=(2-n)*i
return[e,Math.round(n*i/(1>o?o:2-o)*1e4)/100,o/2*100]}var m=null,p={}
c()
var f=function(o){o=o||{},o.seed&&!m&&(m=o.seed)
var r,a,s
if(null!==o.count&&void 0!==o.count){var h=o.count,l=[]
for(o.count=null;h>l.length;)l.push(f(o))
return o.count=h,m=o.seed&&h!==l.length?o.seed:null,l}return r=t(o),a=e(r,o),s=n(r,a,o),i([r,a,s],o)}
return f}),Vector.prototype={negative:function(){return new Vector(-this.x,-this.y,-this.z)},add:function(t){return t instanceof Vector?new Vector(this.x+t.x,this.y+t.y,this.z+t.z):new Vector(this.x+t,this.y+t,this.z+t)},subtract:function(t){return t instanceof Vector?new Vector(this.x-t.x,this.y-t.y,this.z-t.z):new Vector(this.x-t,this.y-t,this.z-t)},multiply:function(t){return t instanceof Vector?new Vector(this.x*t.x,this.y*t.y,this.z*t.z):new Vector(this.x*t,this.y*t,this.z*t)},divide:function(t){return t instanceof Vector?new Vector(this.x/t.x,this.y/t.y,this.z/t.z):new Vector(this.x/t,this.y/t,this.z/t)},equals:function(t){return this.x==t.x&&this.y==t.y&&this.z==t.z},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){return new Vector(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},length:function(){return Math.sqrt(this.dot(this))},unit:function(){return this.divide(this.length())},unitRounded:function(){var t=this.divide(this.length())
return t.x=Math.round(t.x),t.y=Math.round(t.y),t.z=Math.round(t.z),t},min:function(){return Math.min(Math.min(this.x,this.y),this.z)},max:function(){return Math.max(Math.max(this.x,this.y),this.z)},toAngles:function(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}},angleTo:function(t){return Math.acos(this.dot(t)/(this.length()*t.length()))},toArray:function(t){return[this.x,this.y,this.z].slice(0,t||3)},clone:function(){return new Vector(this.x,this.y,this.z)},init:function(t,e,n){return this.x=t,this.y=e,this.z=n,this}},Vector.negative=function(t,e){return e.x=-t.x,e.y=-t.y,e.z=-t.z,e},Vector.add=function(t,e,n){return e instanceof Vector?(n.x=t.x+e.x,n.y=t.y+e.y,n.z=t.z+e.z):(n.x=t.x+e,n.y=t.y+e,n.z=t.z+e),n},Vector.subtract=function(t,e,n){return e instanceof Vector?(n.x=t.x-e.x,n.y=t.y-e.y,n.z=t.z-e.z):(n.x=t.x-e,n.y=t.y-e,n.z=t.z-e),n},Vector.multiply=function(t,e,n){return e instanceof Vector?(n.x=t.x*e.x,n.y=t.y*e.y,n.z=t.z*e.z):(n.x=t.x*e,n.y=t.y*e,n.z=t.z*e),n},Vector.divide=function(t,e,n){return e instanceof Vector?(n.x=t.x/e.x,n.y=t.y/e.y,n.z=t.z/e.z):(n.x=t.x/e,n.y=t.y/e,n.z=t.z/e),n},Vector.cross=function(t,e,n){return n.x=t.y*e.z-t.z*e.y,n.y=t.z*e.x-t.x*e.z,n.z=t.x*e.y-t.y*e.x,n},Vector.unit=function(t,e){var n=t.length()
return e.x=t.x/n,e.y=t.y/n,e.z=t.z/n,e},Vector.distance=function(t,e){var n=t.subtract(e)
return n.length()},Vector.fromAngles=function(t,e){return new Vector(Math.cos(t)*Math.cos(e),Math.sin(e),Math.sin(t)*Math.cos(e))},Vector.randomDirection=function(){return Vector.fromAngles(Math.random()*Math.PI*2,Math.asin(2*Math.random()-1))},Vector.min=function(t,e){return new Vector(Math.min(t.x,e.x),Math.min(t.y,e.y),Math.min(t.z,e.z))},Vector.max=function(t,e){return new Vector(Math.max(t.x,e.x),Math.max(t.y,e.y),Math.max(t.z,e.z))},Vector.lerp=function(t,e,n){return e.subtract(t).multiply(n).add(t)},Vector.fromArray=function(t){return new Vector(t[0],t[1],t[2])},Vector.angleBetween=function(t,e){return t.angleTo(e)}
